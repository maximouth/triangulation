
void setup() {
  Serial.begin(9600);
  
}


int tab[3] = {0,0,0};






void loop() {
  
  Serial.println(1);
  delay(300);
  Serial.flush();
  tab[0] = puissance();
  Serial.print ("tab0 : ");
  Serial.println(tab[0]);
  delay(500);
  /* 
   Serial.println(2);
  tab[1] = puissance();
  Serial.println(tab[1]);
  delay(500);
  
  Serial.println(3);
  tab[2] = puissance();
  Serial.println(tab[2]);
  delay(500);
  */

}

int puissance() {
  char byte =0;
  char hex1, hex2;

  Serial.print("+++");
  /*while (byte != '\r') {
    if (Serial.available() > 0) {
      byte = Serial.read();
      //Serial.println(byte);
    }
  }
  */
  delay(500);  Serial.read();
  //  delay(250);
  //Serial.flush();
  
  Serial.print("atdb\n");
  hex1 = Serial.read();
  hex2 = Serial.read();
  Serial.read();
  Serial.print ("hew 1 et 2 :");
  Serial.print (hex1);
  Serial.print (hex2);

  
  return hex_to_int(hex1, hex2);
}

int hex_to_int(char a, char b) {
  int c = hex(a);
  int d = hex(b);

  return (16 * c)+ d;
  
}

int hex (char c) {
  switch (c) {
  case '1' :
    return 1;
    break;
  case '2' :
    return 2;
    break;
  case '3' :
    return 3;
    break;
  case '4' :
    return 4;
    break;
  case '5' :
    return 5;
    break;
  case '6' :
    return 6;
    break;
  case '7' :
    return 7;
    break;
  case '8' :
    return 8;
    break;
  case '9' :
    return 9;
    break;
  case 'A' :
    return 10;
    break;
  case 'B' :
    return 11;
    break;
  case 'C' :
    return 12;
    break;
  case 'D' :
    return 13;
    break;
  case 'E' :
    return 14;
    break;
  case 'F' :
    return 15;
    break;
  default :
    return 0;
    
  }
    

}
